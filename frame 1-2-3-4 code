#include <Servo.h>

Servo servo1;   #scene 1
Servo servo2;   #scene 2
Servo servo3;   #scene 3
Servo servo4;   #scene 4

const int servo1Pin  = 11;
const int servo2Pin  = 9;
const int servo3Pin  = 12;
const int servo4Pin  = 13;

const int buttonPin1 = 2;   
const int buttonPin2 = 4;   
const int buttonPin3 = 5;   

const int sensorPin  = A0;  
const int ledPin     = 8;  


const int threshold  = 500; 


bool flipped     = false;   
bool lastIsDark  = false;   
bool servo2At90  = false;   
bool servo4Done  = false;   


int servo3Angle = 0;
int servo3Step  = 2; 

void setup() {
  
  servo1.attach(servo1Pin);
  servo2.attach(servo2Pin);
  servo3.attach(servo3Pin);
  servo4.attach(servo4Pin);

  
  servo1.write(0);
  servo2.write(90); 
  servo3.write(0);
  servo4.write(90); 

 
  pinMode(buttonPin1, INPUT_PULLUP);
  pinMode(buttonPin2, INPUT_PULLUP);
  pinMode(buttonPin3, INPUT_PULLUP);
  pinMode(ledPin, OUTPUT);

  Serial.begin(9600);
}

void loop() {
 
  if (digitalRead(buttonPin1) == LOW) {
    delay(10);
    if (!flipped) {
      servo1.write(180);
      flipped = true;
    } else {
      servo1.write(0);
      flipped = false;
    }
    delay(200);
    while (digitalRead(buttonPin1) == LOW);
    delay(50);
  }

  
  int sensorValue = analogRead(sensorPin);
  Serial.println(sensorValue);
  bool isDark = (sensorValue < threshold);

  if (isDark && !lastIsDark && !servo2At90) {
    digitalWrite(ledPin, HIGH);
    servo2.write(70);
    delay(400);
    servo2.write(90);
    servo2At90 = true;
  }

  if (!isDark && lastIsDark && servo2At90) {
    digitalWrite(ledPin, LOW);
    servo2.write(110);
    delay(400);
    servo2.write(90);
    servo2At90 = false;
  }

  lastIsDark = isDark;

  
  int b2 = digitalRead(buttonPin2);
  if (b2 == HIGH) {
    servo3Angle += servo3Step;
    if (servo3Angle >= 90 || servo3Angle <= 0) servo3Step = -servo3Step;
    servo3.write(servo3Angle);
  } else {
    servo3Angle = 0;
    servo3.write(0);
  }

  
  int b3 = digitalRead(buttonPin3);

  
  if (b3 == HIGH && !servo4Done) {
    servo4.write(70);  
    delay(1000);       
    servo4.write(90);  
    servo4Done = true;  
  }

  
  if (b3 == LOW) {
    servo4Done = false; 
    servo4.write(90);   
  }

  delay(30);
}
